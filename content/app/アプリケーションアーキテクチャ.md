# アプリケーション・アーキテクチャ
## アーキテクチャとは
- 開発対象物の構造＝開発対象物を構成するための部品とその繋がり
- 論理アーキテクチャ：アプリケーションに必要なプログラムやデータなどの構成を決めたもの
- 物理アーキテクチャ：論理アーキテクチャの結果をどのマシンへ配置するかを決めたもの


## アーキテクチャ設計とは
- アーキテクチャを明確にする作業＝開発対象の具体的な実現方法を決定する作業
- 要件通りに動くことは勿論、開発後の機能の拡張容易性なども求められる
- 適切なアーキテクチャ設計は、①作業分担が容易 ②変更箇所の特定時間の短縮 ③再利用性の向上 といったメリットがある<br>→開発成果物のライフサイクルが長期化

## 論理アーキテクチャ
- アプリケーションの構成要素とその関連を明確にしたもの
  - 構成要素＝コンポーネント
- アプリケーションの規模に比例してコンポーネントも増加<br>
  管理が複雑化してしまう…<br>
  →レイヤアーキテクチャ：各コンポーネントを役割ごとにグループ（レイヤ）化することで管理を楽にする
  - 下層のレイヤに対してのみ処理要求が可能
  - 処理結果は下層から上層に受け渡される
  - 3層アーキテクチャが代表的
    - プレゼンテーション層：ユーザインタフェース
    - アプリケーション層：ビジネスロジック
    - データ層：DBや外部との処理
  - 通信コンポーネントやセキュリティコンポーネントなど、全レイヤで利用するコンポーネントをあえてレイヤ外に位置づけることもある

## アーキテクチャパターン
- よく用いられるアーキテクチャの形式、考え方をまとめたもの
- レイヤアーキテクチャ、MVCアーキテクチャ、PACアーキテクチャなどがある
- パターンについての共通認識が一致していないと開発がスムーズに進まない危険性がある
  - 解決策
  1. 開発前に全体の認識をすり合わせる会議を行う
  2. JavaEEなど、開発言語が提供する開発フレームワークを利用する<br>
  アーキテクチャパターンは抽象的、フレームワークはそれをやや具体化してあるため、ある程度意識せずとも適切な設計になりやすい

## レイヤアーキテクチャ
### プレゼンテーション層
アプリケーションの操作画面に関する処理や簡易的な入力値チェック、入力補助を実施
- ユーザインタフェースコンポーネント
  - ユーザとアプリケーションがやり取りする画面を実現
  - 最低限の入力値チェック
    - これをしないと、アプリケーション層の処理が煩雑になったり、アプリケーション層完成まで入力値チェックができなかったりといった不都合が生じる
  - 入力補助
    - 入力を選択式にすることで正しい情報を入力させることができる
  - レイアウトはほかのユーザインタフェースコンポーネントとのバランスで決定する
    - 例：入力補助をリストにするかラジオボタンにするか
### アプリケーション層
アプリケーションの機能（ビジネスロジック）を正しく実行<br>
プレゼンテーション層とデータ層を中継する
- ビジネスロジックコンポーネント
  - アプリケーションの中核となる、ビジネスロジックを定義し実行するコンポーネント
  - ユーザインタフェースコンポーネントから入力を受け取り、処理をして結果を返す
- サービスインタフェースコンポーネント
  - ビジネスロジックコンポーネントのつながりを定義し、ビジネスロジックコンポーネントの独立性を高める
    - コンポーネントの再利用性が高まる
### データ層
DBなどの外部リソースに対して操作する
- データアクセスコンポーネント
  - データベースの操作（データの取得、登録など）を定義
- 外部アクセスコンポーネント
  - 別アプリケーションへの操作を定義（別アプリケーションと連携する場合に開発する）
### 複数層にまたがるコンポーネント
アプリケーション全体のポリシーを定義
- セキュリティコンポーネント
  - アプリケーションで用いるデータを安全にやり取りするポリシーを定義
  - データの暗号化・複合の方法など（一般的にはDES,AESといった有名なアルゴリズムを利用する）
  - アルゴリズムを変更する場合、セキュリティコンポーネントだけを変更すれば済む
- 通信コンポーネント
  - アプリケーション内の通信に関するポリシーを定義
  - データのフォーマットなどを定義
  - コンポーネントを物理的に別のマシンに配置するときに重要
  